<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Lead Source Attribution in CRM Systems | B2B Vic</title>
    <meta name="description" content="How to track where leads originate, calculate cost-per-acquisition by channel, and eliminate attribution gaps that distort marketing ROI calculations." />
    <meta name="author" content="Victor Valentine Romo" />
    <meta property="og:title" content="Lead Source Attribution in CRM Systems" />
    <meta property="og:description" content="How to track where leads originate, calculate cost-per-acquisition by channel, and eliminate attribution gaps that distort marketing ROI calculations." />
    <meta property="og:type" content="article" />
    <meta property="og:url" content="https://b2bvic.com/articles/lead-source-attribution-crm.html" />
    <meta property="og:site_name" content="B2B Vic" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Lead Source Attribution in CRM Systems" />
    <meta name="twitter:description" content="How to track where leads originate, calculate cost-per-acquisition by channel, and eliminate attribution gaps that distort marketing ROI calculations." />
    <link rel="canonical" href="https://b2bvic.com/articles/lead-source-attribution-crm.html" />

    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><rect fill='%230a0a0a' width='100' height='100' rx='12'/><text x='50' y='70' font-family='sans-serif' font-size='38' font-weight='700' fill='%23d97706' text-anchor='middle'>VVR</text></svg>">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Sora:wght@400;500;600;700&family=DM+Sans:wght@400;500;600&family=IBM+Plex+Mono:wght@400;500&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>

    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              base: '#0a0a0a',
              surface: { DEFAULT: '#171717', overlay: '#262626' },
              accent: { DEFAULT: '#d97706', light: '#f59e0b' },
              zinc: {
                50: '#fafafa', 100: '#f4f4f5', 200: '#e4e4e7', 300: '#d4d4d8',
                400: '#a1a1aa', 500: '#71717a', 600: '#52525b', 700: '#3f3f46',
                800: '#27272a', 900: '#18181b', 950: '#09090b'
              }
            },
            fontFamily: {
              display: ['Sora', 'system-ui', '-apple-system', 'sans-serif'],
              body: ['Sora', 'system-ui', '-apple-system', 'sans-serif'],
              mono: ['IBM Plex Mono', 'ui-monospace', 'monospace']
            }
          }
        }
      }
    </script>
    <link rel="me" href="https://scalewithsearch.com" />
    <link rel="me" href="https://victorvalentineromo.com" />
    <link rel="me" href="https://aifirstsearch.com" />
    <link rel="me" href="https://browserprompt.com" />
    <link rel="me" href="https://creatinepedia.com" />
    <link rel="me" href="https://polytraffic.com" />
    <link rel="me" href="https://tattooremovalnear.com" />
    <link rel="me" href="https://comicstripai.com" />
    <link rel="me" href="https://b2bvic.com" />
    <link rel="me" href="https://aipaypercrawl.com" />
    <link rel="me" href="https://seobyrole.com" />
    <link rel="me" href="https://quickfixseo.com" />
    <style>

    /* Mega menu */
    .mega-panel { transition: opacity 0.15s ease, visibility 0.15s ease; }
    .mega-panel.hidden { opacity: 0; visibility: hidden; display: none; }
    .mega-panel:not(.hidden) { opacity: 1; visibility: visible; display: block; }
    .mega-link {
      display: block; padding: 6px 0;
      font-size: 0.875rem; color: #a1a1aa;
      transition: color 0.15s;
    }
    .mega-link:hover { color: #fafafa; text-decoration: none; }
    .mega-view-all {
      display: inline-block; margin-top: 12px;
      font-size: 0.8125rem; font-weight: 500;
      color: #d97706; transition: color 0.15s;
    }
    .mega-view-all:hover { color: #f59e0b; text-decoration: none; }

    /* Nav effects */
    .nav-link { position: relative; }
    .nav-link::after {
      content: ''; position: absolute; bottom: -2px; left: 0;
      width: 0; height: 1px; background: #d97706; transition: width 0.3s ease;
    }
    .nav-link:hover::after { width: 100%; }
    .cta-glow { position: relative; }
    .cta-glow::before {
      content: ''; position: absolute; inset: -2px;
      background: linear-gradient(135deg, #f59e0b, #d97706);
      border-radius: inherit; opacity: 0; filter: blur(12px);
      transition: opacity 0.3s ease; z-index: -1;
    }
    .cta-glow:hover::before { opacity: 0.5; }

    /* Active trigger state */
    .mega-trigger[aria-expanded="true"] { color: #fafafa; }
    .mega-trigger[aria-expanded="true"] svg { transform: rotate(180deg); }

    /* Scrollbar */
    ::-webkit-scrollbar { width: 6px; }
    ::-webkit-scrollbar-track { background: #0a0a0a; }
    ::-webkit-scrollbar-thumb { background: #27272a; border-radius: 3px; }
    ::-webkit-scrollbar-thumb:hover { background: #3f3f46; }

    /* Article prose overrides for dark theme */
    .prose-dark h1, .prose-dark h2, .prose-dark h3, .prose-dark h4 { color: #fafafa; }
    .prose-dark p, .prose-dark li, .prose-dark td, .prose-dark th { color: #a1a1aa; }
    .prose-dark strong { color: #fafafa; }
    .prose-dark a { color: #d97706; }
    .prose-dark a:hover { color: #f59e0b; }
    .prose-dark blockquote { border-left-color: #d97706; background: #171717; padding: 1rem 1.5rem; border-radius: 0 0.5rem 0.5rem 0; }
    .prose-dark blockquote p { color: #a1a1aa; }
    .prose-dark code { background: #171717; color: #f59e0b; padding: 0.15em 0.4em; border-radius: 0.25rem; font-size: 0.875em; }
    .prose-dark pre { background: #171717; border: 1px solid #27272a; border-radius: 0.5rem; }
    .prose-dark pre code { background: transparent; color: #a1a1aa; padding: 0; }
    .prose-dark hr { border-color: #27272a; }
    .prose-dark ul { list-style-type: disc; }
    .prose-dark ol { list-style-type: decimal; }
    .prose-dark table { border-collapse: collapse; }
    .prose-dark th { border-bottom: 2px solid #27272a; padding: 0.75rem; text-align: left; }
    .prose-dark td { border-bottom: 1px solid #27272a; padding: 0.75rem; }
    .prose-dark img { border-radius: 0.5rem; }

    </style>
    <script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@graph": [
    {
      "@type": "Article",
      "headline": "Lead Source Attribution in CRM Systems",
      "description": "How to track where leads originate, calculate cost-per-acquisition by channel, and eliminate attribution gaps that distort marketing ROI calculations.",
      "author": {
        "@type": "Person",
        "name": "Victor Valentine Romo",
        "url": "https://victorvalentineromo.com",
        "jobTitle": "Fractional SEO Consultant",
        "sameAs": [
          "https://scalewithsearch.com",
          "https://victorvalentineromo.com",
          "https://aifirstsearch.com",
          "https://browserprompt.com",
          "https://creatinepedia.com",
          "https://polytraffic.com",
          "https://tattooremovalnear.com",
          "https://comicstripai.com",
          "https://b2bvic.com",
          "https://aipaypercrawl.com",
          "https://seobyrole.com",
          "https://quickfixseo.com"
        ]
      },
      "publisher": {
        "@type": "Organization",
        "name": "B2B Vic",
        "url": "https://b2bvic.com"
      },
      "datePublished": "2026-02-08",
      "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "https://b2bvic.com/articles/lead-source-attribution-crm.html"
      }
    },
    {
      "@type": "BreadcrumbList",
      "itemListElement": [
        {
          "@type": "ListItem",
          "position": 1,
          "name": "Home",
          "item": "https://b2bvic.com/"
        },
        {
          "@type": "ListItem",
          "position": 2,
          "name": "Writing",
          "item": "https://b2bvic.com/articles.html"
        },
        {
          "@type": "ListItem",
          "position": 3,
          "name": "Lead Source Attribution in CRM Systems"
        }
      ]
    }
  ]
}
    </script>
</head>
<body class="bg-[#0a0a0a] text-zinc-400 antialiased font-body">


  <nav class="fixed top-0 left-0 right-0 z-50 border-b border-zinc-800/60 bg-[#0a0a0a]/95 backdrop-blur-md">
    <div class="max-w-6xl mx-auto">
      <div class="flex items-center justify-between h-16 px-6">
        <!-- Logo -->
        <a href="/" class="flex items-center gap-2 group">
          <span class="font-display font-700 text-xl tracking-tight text-amber-500 group-hover:text-amber-400 transition-colors">b2bvic</span>
        </a>

        <!-- Desktop Nav -->
        <div class="hidden lg:flex items-center gap-1">

          <!-- Writing dropdown -->
          <div class="relative" data-mega="writing">
            <button class="mega-trigger nav-link px-4 py-2 text-sm text-zinc-400 hover:text-zinc-200 transition-colors flex items-center gap-1 font-body font-500">
              Writing
              <svg class="w-3 h-3 opacity-50 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
            </button>
          </div>

          <!-- Services dropdown -->
          <div class="relative" data-mega="services">
            <button class="mega-trigger nav-link px-4 py-2 text-sm text-zinc-400 hover:text-zinc-200 transition-colors flex items-center gap-1 font-body font-500">
              Services
              <svg class="w-3 h-3 opacity-50 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
            </button>
          </div>

          <!-- Case Studies (direct link) -->
          <a href="/case-studies.html" class="nav-link px-4 py-2 text-sm text-zinc-400 hover:text-zinc-200 transition-colors font-body font-500">Case Studies</a>

          <!-- About (direct link) -->
          <a href="/about.html" class="nav-link px-4 py-2 text-sm text-zinc-400 hover:text-zinc-200 transition-colors font-body font-500">About</a>

          <div class="w-px h-4 bg-zinc-800 mx-2"></div>

          <!-- CTA -->
          <a href="/services.html#contact" class="px-5 py-2 text-sm font-semibold bg-amber-600 hover:bg-amber-500 text-white rounded-md transition-colors cta-glow font-display">Work With Me</a>
        </div>

        <!-- Mobile menu button -->
        <button id="mobile-menu-btn" aria-label="Open menu" class="lg:hidden p-2 text-zinc-400 hover:text-zinc-200">
          <svg id="menu-icon" class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
          <svg id="close-icon" class="w-5 h-5 hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
        </button>
      </div>

      <!-- MEGA PANEL: Writing -->
      <div id="mega-writing" class="mega-panel hidden border-t border-zinc-800/60 bg-[#0a0a0a]">
        <div class="max-w-6xl mx-auto px-6 py-8">
          <div class="grid grid-cols-4 gap-8">
            <div>
              <div class="flex items-center gap-2 mb-4">
                <span class="text-xs font-semibold tracking-wider text-zinc-500 uppercase">SEO Strategy</span>
              </div>
              <div class="space-y-1">
                <a href="/articles/why-fractional-seo-beats-agencies.html" class="mega-link">Fractional vs Agencies</a>
                <a href="/articles/why-your-seo-audit-failed.html" class="mega-link">Why SEO Audits Fail</a>
                <a href="/articles/enterprise-seo-audit-4-hour-framework.html" class="mega-link">4-Hour Enterprise Audit</a>
                <a href="/articles/saas-seo-url-architecture-subdomains-subdirectories.html" class="mega-link">SaaS URL Architecture</a>
              </div>
            </div>
            <div>
              <div class="flex items-center gap-2 mb-4">
                <span class="text-xs font-semibold tracking-wider text-zinc-500 uppercase">AI Systems</span>
              </div>
              <div class="space-y-1">
                <a href="/articles/ai-prompt-engineering-seo.html" class="mega-link">AI Prompt Engineering for SEO</a>
                <a href="/articles/local-llm-deployment-enterprise-marketing.html" class="mega-link">Local LLM Deployment</a>
                <a href="/articles/observer-protocol-ai-content-voice-homogenization.html" class="mega-link">Observer Protocol</a>
              </div>
            </div>
            <div>
              <div class="flex items-center gap-2 mb-4">
                <span class="text-xs font-semibold tracking-wider text-zinc-500 uppercase">Business Growth</span>
              </div>
              <div class="space-y-1">
                <a href="/articles/real-estate-seo-systems-database-driven-leads.html" class="mega-link">Database-Driven SEO</a>
                <a href="/articles/google-business-profile-multi-location-local-seo.html" class="mega-link">Multi-Location Local SEO</a>
                <a href="/articles/platform-seo-user-generated-content-scale.html" class="mega-link">Platform SEO at Scale</a>
              </div>
            </div>
            <div>
              <a href="/articles.html" class="mega-view-all">All articles &rarr;</a>
            </div>
          </div>
        </div>
      </div>

      <!-- MEGA PANEL: Services -->
      <div id="mega-services" class="mega-panel hidden border-t border-zinc-800/60 bg-[#0a0a0a]">
        <div class="max-w-6xl mx-auto px-6 py-8">
          <div class="grid grid-cols-4 gap-8">
            <div>
              <a href="/services.html#fractional" class="block group">
                <p class="text-sm font-semibold text-zinc-200 group-hover:text-amber-400 transition-colors">Fractional SEO Leadership</p>
                <p class="text-xs text-zinc-500 mt-1">$8,000/mo &middot; 10 hrs/mo</p>
                <p class="text-xs text-zinc-600 mt-2">Senior strategic oversight embedded in your team. 6-month minimum.</p>
              </a>
            </div>
            <div>
              <a href="/services.html#knowledge" class="block group">
                <p class="text-sm font-semibold text-zinc-200 group-hover:text-amber-400 transition-colors">AI Knowledge Systems</p>
                <p class="text-xs text-zinc-500 mt-1">$5,000 one-time</p>
                <p class="text-xs text-zinc-600 mt-2">Custom AI memory architecture for your team's workflows.</p>
              </a>
            </div>
            <div>
              <a href="/services.html#sites" class="block group">
                <p class="text-sm font-semibold text-zinc-200 group-hover:text-amber-400 transition-colors">Site Builds</p>
                <p class="text-xs text-zinc-500 mt-1">From $5,000</p>
                <p class="text-xs text-zinc-600 mt-2">SEO-native static sites engineered for topical authority.</p>
              </a>
            </div>
            <div>
              <a href="/services.html#consulting" class="block group">
                <p class="text-sm font-semibold text-zinc-200 group-hover:text-amber-400 transition-colors">Consulting</p>
                <p class="text-xs text-zinc-500 mt-1">$200/hr</p>
                <p class="text-xs text-zinc-600 mt-2">Strategy sessions, audits, second opinions. No commitment.</p>
              </a>
            </div>
          </div>
          <div class="mt-6 pt-4 border-t border-zinc-800/40">
            <a href="/services.html" class="text-sm text-amber-500 hover:text-amber-400 font-medium transition-colors">View all services &rarr;</a>
          </div>
        </div>
      </div>

      <!-- Mobile Menu -->
      <div id="mobile-menu" class="hidden lg:hidden border-t border-zinc-800 bg-[#0a0a0a] max-h-[80vh] overflow-y-auto">
        <div class="px-6 py-4 space-y-1">
          <button class="mobile-section-toggle w-full flex items-center justify-between py-3 text-zinc-200 font-medium">
            Writing
            <svg class="w-4 h-4 text-zinc-600 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
          </button>
          <div class="mobile-section hidden pl-4 pb-3 space-y-1">
            <a href="/articles/why-fractional-seo-beats-agencies.html" class="block py-1.5 text-sm text-zinc-400 hover:text-white">Fractional vs Agencies</a>
            <a href="/articles/enterprise-seo-audit-4-hour-framework.html" class="block py-1.5 text-sm text-zinc-400 hover:text-white">4-Hour Enterprise Audit</a>
            <a href="/articles/ai-prompt-engineering-seo.html" class="block py-1.5 text-sm text-zinc-400 hover:text-white">AI Prompt Engineering for SEO</a>
            <a href="/articles.html" class="block py-1.5 text-sm text-amber-500 font-medium">All articles &rarr;</a>
          </div>

          <button class="mobile-section-toggle w-full flex items-center justify-between py-3 text-zinc-200 font-medium">
            Services
            <svg class="w-4 h-4 text-zinc-600 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
          </button>
          <div class="mobile-section hidden pl-4 pb-3 space-y-1">
            <a href="/services.html#fractional" class="block py-1.5 text-sm text-zinc-400 hover:text-white">Fractional SEO &middot; $8K/mo</a>
            <a href="/services.html#knowledge" class="block py-1.5 text-sm text-zinc-400 hover:text-white">AI Knowledge Systems &middot; $5K</a>
            <a href="/services.html#sites" class="block py-1.5 text-sm text-zinc-400 hover:text-white">Site Builds &middot; $5K+</a>
            <a href="/services.html#consulting" class="block py-1.5 text-sm text-zinc-400 hover:text-white">Consulting &middot; $200/hr</a>
            <a href="/services.html" class="block py-1.5 text-sm text-amber-500 font-medium">All services &rarr;</a>
          </div>

          <a href="/case-studies.html" class="block py-3 text-zinc-200 font-medium">Case Studies</a>
          <a href="/about.html" class="block py-3 text-zinc-200 font-medium">About</a>

          <a href="/services.html#contact" class="block mt-4 py-3 bg-amber-600 text-white text-center font-semibold rounded-lg">Work With Me</a>
        </div>
      </div>
    </div>
  </nav>

    <!-- Spacer for fixed nav -->
    <div class="h-16"></div>

    <!-- Breadcrumbs -->
    <div class="max-w-3xl mx-auto px-6 pt-8 pb-4">
      <nav class="text-xs text-zinc-600">
        <a href="/" class="hover:text-zinc-400 transition-colors">Home</a>
        <span class="mx-2">/</span>
        <a href="/articles.html" class="hover:text-zinc-400 transition-colors">Writing</a>
        <span class="mx-2">/</span>
        <span class="text-zinc-500">Lead Source Attribution in CRM Systems</span>
      </nav>
    </div>

    <!-- Article -->
    <main class="max-w-3xl mx-auto px-6 pb-20">
        <article class="prose-dark">
            <h1 class="text-3xl md:text-4xl font-display font-700 text-[#fafafa] leading-tight mb-8">Lead Source Attribution in CRM Systems</h1>
            <div class="flex items-center gap-4 mb-12 text-sm text-zinc-600">
              <span>Victor Valentine Romo</span>
              <span class="text-zinc-800">&middot;</span>
              <time datetime="2026-02-08">2026-02-08</time>
            </div>
            <div class="space-y-6 leading-relaxed text-base">
            <h1>Lead Source Attribution in CRM Systems</h1>
<p>Marketing spend decisions collapse without reliable <strong>lead source attribution</strong>. You&#39;re allocating $50K/month across five channels but can&#39;t definitively say which ones generate closable pipeline. Sales blames marketing for sending junk leads. Marketing blames sales for not following up. The root cause: your CRM doesn&#39;t accurately capture where leads originate, so you&#39;re flying blind on which channels deserve budget and which ones deserve to be cut.</p>
<p>Lead source attribution answers three questions: (1) Where did this lead first discover us? (2) What touchpoints influenced their decision to engage? (3) Which channel deserves credit for the conversion? Get attribution wrong and you&#39;ll defund channels that work while scaling channels that don&#39;t.</p>
<p>This matters acutely for B2B, where purchase cycles span months and prospects interact with 10+ touchpoints before converting. A prospect might discover you via organic search, return through a LinkedIn ad, download a whitepaper from an email campaign, then request a demo after attending a webinar. Which channel gets credit? The answer determines whether you invest in SEO, LinkedIn ads, email nurture, or webinars.</p>
<p>This framework builds attribution infrastructure from intake through close, implements it in your CRM, and calculates accurate cost-per-acquisition metrics by channel.</p>
<h2>First-Touch vs. Multi-Touch Attribution</h2>
<p><strong>First-touch attribution</strong> assigns 100% credit to the channel that introduced the lead. If a prospect found you via organic search, that&#39;s the attributed source even if they later engaged through ads, email, and webinars.</p>
<p><strong>Last-touch attribution</strong> credits the final interaction before conversion. If a prospect requested a demo after clicking a LinkedIn ad, LinkedIn gets credit regardless of prior touchpoints.</p>
<p><strong>Multi-touch attribution</strong> distributes credit across all touchpoints. Models include:</p>
<ul>
<li><strong>Linear</strong> — Equal credit to all touchpoints (SEO, LinkedIn, email, webinar each get 25%)</li>
<li><strong>Time-decay</strong> — More credit to recent touchpoints (webinar 40%, email 30%, LinkedIn 20%, SEO 10%)</li>
<li><strong>U-shaped</strong> — 40% to first touch, 40% to last touch, 20% distributed across middle touchpoints</li>
<li><strong>W-shaped</strong> — Credit to first touch, middle &quot;conversion&quot; touch (form fill or demo request), and final touch before close</li>
<li><strong>Custom</strong> — Weighted based on your analysis of which touchpoints correlate most with closed deals</li>
</ul>
<p>First-touch attribution is simplest to implement and useful for understanding <strong>lead generation efficiency</strong> — which channels bring new prospects into the funnel. Last-touch attribution measures <strong>conversion influence</strong> — which channels push prospects over the decision line. Multi-touch attribution provides the most complete picture but requires sophisticated tracking infrastructure.</p>
<p>For most B2B companies starting from zero attribution, implement <strong>first-touch + last-touch</strong> in parallel. Track both, analyze which channels excel at top-of-funnel generation vs. bottom-of-funnel conversion, then allocate budget accordingly.</p>
<h2>Capturing Lead Source at Intake</h2>
<p>Attribution fails if source data never gets recorded. Most CRM attribution gaps occur at intake — form submissions, phone calls, and manual imports that bypass source tagging.</p>
<p><strong>Web form submissions</strong> — Every form on your site must capture UTM parameters and referring URL. When a visitor clicks a LinkedIn ad (<code>utm_source=linkedin&amp;utm_medium=cpc&amp;utm_campaign=Q1-Enterprise</code>), those parameters get appended to the landing page URL. Your form handler captures them and writes them to the CRM as lead source fields.</p>
<p>Implementation:</p>
<ol>
<li>Add hidden fields to forms: <code>utm_source</code>, <code>utm_medium</code>, <code>utm_campaign</code>, <code>utm_content</code>, <code>utm_term</code>, <code>referrer</code></li>
<li>Use JavaScript to populate hidden fields from URL parameters</li>
<li>Map form fields to CRM fields on submission</li>
</ol>
<p>Example JavaScript for form auto-population:</p>
<pre><code class="language-javascript">const urlParams = new URLSearchParams(window.location.search);
document.getElementById(&#39;utm_source&#39;).value = urlParams.get(&#39;utm_source&#39;) || &#39;&#39;;
document.getElementById(&#39;utm_medium&#39;).value = urlParams.get(&#39;utm_medium&#39;) || &#39;&#39;;
document.getElementById(&#39;referrer&#39;).value = document.referrer || &#39;&#39;;
</code></pre>
<p>When the form submits, those values flow into your CRM as <code>Lead Source</code> (utm_source), <code>Lead Medium</code> (utm_medium), and <code>Lead Campaign</code> (utm_campaign).</p>
<p><strong>Phone calls</strong> — Implement call tracking with <strong>CallRail</strong>, <strong>CallTrackingMetrics</strong>, or <strong>Invoca</strong>. These services assign unique phone numbers to different marketing channels. Your website shows one number, LinkedIn ads show another, Google ads show a third. When a prospect calls, the system logs which number they dialed and attributes the lead accordingly.</p>
<p>Integrate call tracking with your CRM so inbound calls auto-create leads with source attribution. Map call tracking fields to CRM lead source fields.</p>
<p><strong>Manual imports</strong> — Sales reps often add leads manually (conference contacts, cold outreach targets, referrals). Require source selection at lead creation. Pre-populate a dropdown with standardized sources: <code>Conference - [Event Name]</code>, <code>Referral - [Source Name]</code>, <code>Cold Outreach - [List Name]</code>.</p>
<p>Avoid freeform text fields for source. &quot;LinkedIn&quot; vs. &quot;linkedin&quot; vs. &quot;LinkedIn Ad&quot; fragments your data. Use picklists with controlled vocabulary.</p>
<p><strong>Offline conversions</strong> — If a prospect attends a trade show, downloads a whitepaper at a booth, then later converts online, track the offline touchpoint. Use unique promo codes or landing page URLs for offline campaigns. Example: print ads include <code>yoursite.com/manufacturing</code> (not homepage). That URL path signals the lead came from print advertising.</p>
<h2>Standardizing Source Taxonomy</h2>
<p>Ad-hoc source naming destroys attribution. &quot;Google Ads,&quot; &quot;Google Ad,&quot; &quot;google_ads,&quot; &quot;gads,&quot; and &quot;PPC&quot; all referring to the same channel creates five separate source values. Reporting becomes archaeology — you spend hours consolidating variations instead of analyzing performance.</p>
<p>Build a <strong>source taxonomy</strong> with three tiers:</p>
<p><strong>Tier 1: Channel (utm_source)</strong></p>
<ul>
<li>organic_search</li>
<li>paid_search</li>
<li>linkedin</li>
<li>facebook</li>
<li>email</li>
<li>referral</li>
<li>direct</li>
<li>webinar</li>
<li>conference</li>
<li>cold_outreach</li>
</ul>
<p><strong>Tier 2: Medium (utm_medium)</strong></p>
<ul>
<li>cpc (cost-per-click)</li>
<li>cpm (cost-per-impression)</li>
<li>email (nurture campaigns)</li>
<li>organic (unpaid)</li>
<li>social (organic social)</li>
<li>referral (partner/customer)</li>
</ul>
<p><strong>Tier 3: Campaign (utm_campaign)</strong></p>
<ul>
<li>Q1_Enterprise_Launch</li>
<li>Webinar_Manufacturing_ERP</li>
<li>Nurture_Whitepaper_Follow-Up</li>
<li>Conference_Booth_2026</li>
</ul>
<p>Document the taxonomy in a shared Google Sheet or Notion doc. Require marketing to use standardized values for all campaigns. Set up UTM builders (tools like <strong>Google Campaign URL Builder</strong>) with dropdowns pre-populated from your taxonomy to prevent freeform entry errors.</p>
<p>Review source data monthly. Pull a report of all lead sources created in the past 30 days. Flag any values that don&#39;t match the taxonomy. Consolidate manually if needed, then communicate corrections to the team.</p>
<h2>Multi-Touch Tracking Infrastructure</h2>
<p>First-touch attribution captures the initial source. Multi-touch attribution requires logging every subsequent interaction. Implement <strong>touchpoint tracking</strong> using marketing automation platforms (<strong>HubSpot</strong>, <strong>Marketo</strong>, <strong>Pardot</strong>, <strong>ActiveCampaign</strong>) or analytics tools (<strong>Google Analytics</strong>, <strong>Segment</strong>, <strong>Mixpanel</strong>).</p>
<p><strong>Touchpoint data to capture:</strong></p>
<ul>
<li><strong>Page visits</strong> — Which pages the lead visited, when, and how many times</li>
<li><strong>Content downloads</strong> — Whitepapers, case studies, templates</li>
<li><strong>Email engagement</strong> — Opens, clicks, replies</li>
<li><strong>Ad interactions</strong> — Impressions, clicks, video views</li>
<li><strong>Webinar attendance</strong> — Registered, attended, watched replay</li>
<li><strong>Sales interactions</strong> — Calls, emails, demos</li>
</ul>
<p>Store touchpoints in your CRM as <strong>campaign member records</strong> or <strong>activity history</strong>. Each touchpoint logs:</p>
<ul>
<li>Timestamp</li>
<li>Channel (source/medium)</li>
<li>Campaign name</li>
<li>Content asset (if applicable)</li>
<li>Outcome (viewed, downloaded, clicked, attended)</li>
</ul>
<p>Link touchpoints to the lead record. When analyzing attribution, query all touchpoints associated with a lead between first-touch and conversion.</p>
<p>Example multi-touch journey for a closed-won deal:</p>
<ol>
<li><strong>Day 1</strong> — Organic search → blog post (first-touch: <code>organic_search</code>)</li>
<li><strong>Day 5</strong> — LinkedIn ad → whitepaper download (touchpoint: <code>linkedin/cpc</code>)</li>
<li><strong>Day 12</strong> — Email nurture → case study view (touchpoint: <code>email/nurture</code>)</li>
<li><strong>Day 20</strong> — Webinar registration → attended live (touchpoint: <code>webinar/registration</code>)</li>
<li><strong>Day 22</strong> — Direct site visit → demo request (last-touch: <code>direct</code>)</li>
</ol>
<p>Multi-touch model distributes credit. Linear: each gets 20%. Time-decay: webinar and direct get more weight. U-shaped: organic and direct get 40% each, middle three split 20%.</p>
<h2>Calculating Cost-Per-Acquisition by Channel</h2>
<p>Attribution enables ROI calculation. For each channel, calculate:</p>
<p><strong>Cost-per-lead (CPL)</strong> = Total channel spend / Total leads generated</p>
<p><strong>Cost-per-opportunity (CPO)</strong> = Total channel spend / Total qualified opportunities generated</p>
<p><strong>Cost-per-acquisition (CPA)</strong> = Total channel spend / Total customers acquired</p>
<p>Example:</p>
<table>
<thead>
<tr>
<th>Channel</th>
<th>Spend</th>
<th>Leads</th>
<th>Opps</th>
<th>Customers</th>
<th>CPL</th>
<th>CPO</th>
<th>CPA</th>
</tr>
</thead>
<tbody><tr>
<td>Organic search</td>
<td>$10K</td>
<td>500</td>
<td>50</td>
<td>10</td>
<td>$20</td>
<td>$200</td>
<td>$1,000</td>
</tr>
<tr>
<td>LinkedIn ads</td>
<td>$30K</td>
<td>300</td>
<td>60</td>
<td>15</td>
<td>$100</td>
<td>$500</td>
<td>$2,000</td>
</tr>
<tr>
<td>Webinars</td>
<td>$5K</td>
<td>100</td>
<td>40</td>
<td>12</td>
<td>$50</td>
<td>$125</td>
<td>$417</td>
</tr>
<tr>
<td>Cold outreach</td>
<td>$15K</td>
<td>200</td>
<td>20</td>
<td>4</td>
<td>$75</td>
<td>$750</td>
<td>$3,750</td>
</tr>
</tbody></table>
<p><strong>Findings:</strong></p>
<ul>
<li>Webinars have the lowest CPA ($417) — invest more</li>
<li>Organic search generates volume at low CPL but moderate CPA — maintain investment</li>
<li>LinkedIn ads cost more per lead but convert at higher rates — acceptable CPA for quality</li>
<li>Cold outreach has the highest CPA — cut or optimize</li>
</ul>
<p>Segment CPA by customer value. If high-value enterprise customers ($100K ACV) come primarily from LinkedIn and conferences, those channels justify higher CPA. If low-value SMB customers ($5K ACV) come from cold outreach, the $3,750 CPA is unprofitable.</p>
<h2>Handling Attribution Edge Cases</h2>
<p>Real-world attribution has gaps. Address these scenarios:</p>
<p><strong>Direct traffic</strong> — Leads marked as &quot;direct&quot; often aren&#39;t. They&#39;re clicking bookmarked links, typing your URL from memory, or arriving from untrackable sources (email clients, PDF links, mobile apps). Many &quot;direct&quot; visitors are actually return visitors from prior attributed touchpoints. Solution: Use <strong>first-touch attribution</strong> as the canonical source. If a lead was first attributed to organic search but later returns via direct, credit organic search.</p>
<p><strong>Unknown or missing source</strong> — Forms submitted without UTM parameters, phone calls from untracked numbers, manually added leads without source selection. Solution: Implement a &quot;Unknown&quot; category, but set a goal to keep it under 10% of total lead volume. Audit unknown leads monthly and attempt to reverse-engineer source from IP address, referring domain, or timing correlation with campaigns.</p>
<p><strong>Cross-device journeys</strong> — A prospect researches on mobile, converts on desktop. Attribution systems can&#39;t link the sessions without login or email capture. Solution: Prioritize email capture early (content gates, newsletter signups) so you can link sessions via email address.</p>
<p><strong>Offline-to-online journeys</strong> — A prospect sees a billboard, searches your brand name, fills out a form. Organic search gets credited but the billboard drove awareness. Solution: Use branded search volume as a proxy metric for offline campaign effectiveness. If branded searches spike 40% after a billboard campaign launches, attribute a portion of those conversions to offline.</p>
<p><strong>Sales-sourced deals</strong> — A rep cold-calls a prospect, books a meeting, closes the deal. Marketing had zero involvement. Solution: Create a &quot;Sales-Sourced&quot; or &quot;Outbound&quot; attribution category. Don&#39;t force-fit sales activity into marketing attribution models.</p>
<h2>CRM Implementation</h2>
<p>Most CRMs support lead source tracking natively. Implementation steps:</p>
<p><strong>Salesforce:</strong></p>
<ul>
<li>Use standard <code>Lead Source</code> field for first-touch attribution</li>
<li>Create custom fields for UTM parameters: <code>UTM_Source__c</code>, <code>UTM_Medium__c</code>, <code>UTM_Campaign__c</code></li>
<li>Use <strong>Salesforce Campaigns</strong> to track multi-touch attribution (add leads to campaigns as they engage)</li>
<li>Build reports grouping closed-won deals by Lead Source or Campaign</li>
</ul>
<p><strong>HubSpot:</strong></p>
<ul>
<li>Use <code>Original Source</code> property (first-touch) and <code>Latest Source</code> property (last-touch)</li>
<li>Create custom properties for UTM parameters if needed</li>
<li>Use <strong>HubSpot Attribution Reports</strong> to visualize multi-touch journeys</li>
<li>Connect HubSpot Ads tool to auto-track LinkedIn, Google, Facebook ad spend and attribution</li>
</ul>
<p><strong>Pipedrive:</strong></p>
<ul>
<li>Use Lead Source field (first-touch)</li>
<li>Create custom fields for UTM parameters</li>
<li>Use Pipedrive&#39;s built-in reporting to calculate deals won by source</li>
<li>Integrate with <strong>Google Analytics</strong> via Zapier to append UTM data to new leads</li>
</ul>
<p><strong>Close.com:</strong></p>
<ul>
<li>Use Lead Source field</li>
<li>Create custom fields for detailed attribution</li>
<li>Use Zapier to capture UTM parameters from form submissions and write them to Close</li>
</ul>
<p>Validate implementation by submitting test leads through each channel. Verify UTM parameters flow into CRM correctly and source attribution appears in contact records.</p>
<h2>Multi-Touch Attribution Platforms</h2>
<p>If your CRM doesn&#39;t support multi-touch attribution natively, use dedicated platforms:</p>
<p><strong>Google Analytics 4</strong> — Tracks user journeys across touchpoints, assigns attribution using built-in models (last-click, first-click, linear, time-decay, position-based). Free but requires event tracking setup.</p>
<p><strong>HubSpot Attribution Reporting</strong> — Included with Marketing Hub Pro+. Visualizes multi-touch journeys, calculates revenue by channel using custom attribution models.</p>
<p><strong>Bizible (Adobe Marketo Measure)</strong> — Enterprise attribution platform. Tracks online and offline touchpoints, integrates with Salesforce, supports custom weighting models. $$$</p>
<p><strong>Dreamdata</strong> — B2B attribution platform. Focuses on account-based attribution, ties revenue to marketing touchpoints, integrates with CRM and ad platforms.</p>
<p><strong>Ruler Analytics</strong> — Marketing attribution tool. Tracks phone calls, form fills, and live chat conversations. Integrates with Google Analytics and CRM.</p>
<p>Choose based on complexity and budget. If you&#39;re &lt;$1M in revenue, stick with built-in CRM attribution and Google Analytics. If you&#39;re $5M+, invest in a dedicated platform to handle multi-touch complexity.</p>
<h2>Reporting and Optimization</h2>
<p>Build attribution dashboards that surface actionable insights:</p>
<p><strong>Lead generation dashboard:</strong></p>
<ul>
<li>Leads by source (month-over-month)</li>
<li>Cost-per-lead by source</li>
<li>Lead-to-opportunity conversion rate by source</li>
<li>Top-performing campaigns within each source</li>
</ul>
<p><strong>Revenue attribution dashboard:</strong></p>
<ul>
<li>Closed-won deals by source</li>
<li>Revenue by source</li>
<li>Cost-per-acquisition by source</li>
<li>ROI by source (revenue / spend)</li>
</ul>
<p><strong>Multi-touch journey analysis:</strong></p>
<ul>
<li>Most common touchpoint sequences for closed deals</li>
<li>Average number of touchpoints before conversion</li>
<li>Time between first touch and close by source</li>
</ul>
<p>Review dashboards monthly. Identify underperforming channels (high spend, low conversion) and overperforming channels (low spend, high conversion). Reallocate budget accordingly.</p>
<p>Run cohort analysis. Group leads by month acquired and track their progression through the funnel over time. Does organic search consistently convert at 15% or does it vary by month? Are LinkedIn ads generating more qualified leads now than six months ago?</p>
<h2>Sales and Marketing Alignment</h2>
<p>Attribution creates shared accountability. Establish SLAs:</p>
<p><strong>Marketing commits to:</strong></p>
<ul>
<li>Accurate source attribution on 90%+ of leads</li>
<li>Monthly attribution reports shared with sales</li>
<li>Transparency on channel performance and budget allocation</li>
</ul>
<p><strong>Sales commits to:</strong></p>
<ul>
<li>Timely follow-up on leads (speed-to-lead impacts attribution analysis)</li>
<li>Honest feedback on lead quality by source</li>
<li>Updating deal stages and close dates so marketing can calculate CPA</li>
</ul>
<p>Hold monthly attribution review meetings. Marketing presents channel performance, sales provides qualitative feedback (&quot;LinkedIn leads are higher quality but take longer to close&quot;), and both teams agree on budget adjustments.</p>
<h2>FAQ</h2>
<p><strong>Should I credit marketing or sales when a rep cold-calls a prospect who later converts?</strong></p>
<p>Sales-sourced. If marketing had zero prior touchpoints and the rep initiated contact, attribute to sales outbound. Don&#39;t artificially inflate marketing metrics.</p>
<p><strong>What if a lead has multiple form submissions with different UTM parameters?</strong></p>
<p>Use first-touch attribution for lead source (credit the first submission&#39;s UTM). Log subsequent submissions as touchpoints for multi-touch models.</p>
<p><strong>How do I attribute referrals?</strong></p>
<p>Create a &quot;Referral&quot; source category. Use campaign or medium fields to specify the referrer (partner name, customer name). If a customer refers multiple leads, track referral volume per customer to identify your best advocates.</p>
<p><strong>Can I change a lead&#39;s source after the fact?</strong></p>
<p>Technically yes, but avoid it. Retroactive changes corrupt historical reporting. If a source was incorrectly recorded, create a &quot;Corrected Source&quot; field and use that for future reporting while preserving the original value.</p>
<p><strong>How do I handle deals that close years after first touch?</strong></p>
<p>Use cohort analysis with time windows. Report on &quot;leads generated in Q1 2024 that closed by Q4 2025.&quot; This shows long-term channel performance without distorting monthly attribution metrics.</p>

            </div>
        </article>

        <!-- Back link -->
        <div class="mt-16 pt-8 border-t border-zinc-800/60">
            <a href="/articles.html" class="text-amber-500 hover:text-amber-400 font-medium transition-colors">&larr; All articles</a>
        </div>

        <!-- CTA -->
        <div class="mt-12 bg-[#171717] border border-zinc-800 rounded-xl p-8">
          <h3 class="text-xl font-display font-600 text-[#fafafa] mb-3">Need this implemented?</h3>
          <p class="text-zinc-400 text-sm mb-6 max-w-lg">I build the search infrastructure behind mid-market B2B growth. If you want these systems running inside your company, not just on your reading list.</p>
          <a href="/services.html#contact" class="inline-block px-6 py-3 bg-amber-600 hover:bg-amber-500 text-white font-semibold rounded-lg transition-colors text-sm">Work With Me</a>
        </div>
    </main>


  <footer class="border-t border-zinc-800/60 bg-[#0a0a0a] pt-16 pb-8">
    <div class="max-w-6xl mx-auto px-6">
      <div class="grid grid-cols-2 md:grid-cols-4 gap-10 mb-14">

        <!-- Col 1: About Victor -->
        <div class="col-span-2 md:col-span-1">
          <div class="flex items-center gap-2 mb-4">
            <span class="font-display font-700 text-lg text-amber-500">b2bvic</span>
          </div>
          <p class="text-sm text-zinc-500 leading-relaxed mb-4">Victor Valentine Romo. Fractional SEO leadership and AI knowledge systems for mid-market B2B companies.</p>
          <a href="/services.html#contact" class="inline-block px-4 py-2 text-sm font-semibold bg-amber-600 hover:bg-amber-500 text-white rounded-md transition-colors">Work With Me</a>
        </div>

        <!-- Col 2: Popular Articles -->
        <div>
          <p class="text-xs text-zinc-600 uppercase tracking-wider mb-4 font-semibold">Writing</p>
          <ul class="space-y-2 text-sm">
            <li><a href="/articles/why-fractional-seo-beats-agencies.html" class="text-zinc-400 hover:text-white transition-colors">Fractional vs Agencies</a></li>
            <li><a href="/articles/why-your-seo-audit-failed.html" class="text-zinc-400 hover:text-white transition-colors">Why SEO Audits Fail</a></li>
            <li><a href="/articles/enterprise-seo-audit-4-hour-framework.html" class="text-zinc-400 hover:text-white transition-colors">4-Hour Audit Framework</a></li>
            <li><a href="/articles/ai-prompt-engineering-seo.html" class="text-zinc-400 hover:text-white transition-colors">AI Prompts for SEO</a></li>
            <li><a href="/articles/local-llm-deployment-enterprise-marketing.html" class="text-zinc-400 hover:text-white transition-colors">Local LLM Deployment</a></li>
            <li><a href="/articles/observer-protocol-ai-content-voice-homogenization.html" class="text-zinc-400 hover:text-white transition-colors">Observer Protocol</a></li>
            <li><a href="/articles/saas-seo-url-architecture-subdomains-subdirectories.html" class="text-zinc-400 hover:text-white transition-colors">SaaS URL Architecture</a></li>
            <li><a href="/articles.html" class="text-amber-500 hover:text-amber-400 transition-colors font-medium">All articles &rarr;</a></li>
          </ul>
        </div>

        <!-- Col 3: Services -->
        <div>
          <p class="text-xs text-zinc-600 uppercase tracking-wider mb-4 font-semibold">Services</p>
          <ul class="space-y-2 text-sm">
            <li><a href="/services.html#fractional" class="text-zinc-400 hover:text-white transition-colors">Fractional SEO ($8K/mo)</a></li>
            <li><a href="/services.html#knowledge" class="text-zinc-400 hover:text-white transition-colors">AI Knowledge Systems ($5K)</a></li>
            <li><a href="/services.html#sites" class="text-zinc-400 hover:text-white transition-colors">Site Builds ($5K+)</a></li>
            <li><a href="/services.html#consulting" class="text-zinc-400 hover:text-white transition-colors">Consulting ($200/hr)</a></li>
            <li><a href="/about.html" class="text-zinc-400 hover:text-white transition-colors">About</a></li>
            <li><a href="/case-studies.html" class="text-zinc-400 hover:text-white transition-colors">Case Studies</a></li>
          </ul>
        </div>

        <!-- Col 4: Network -->
        <div>
          <p class="text-xs text-zinc-600 uppercase tracking-wider mb-4 font-semibold">Network</p>
          <ul class="space-y-2 text-sm">
            <li><a href="https://scalewithsearch.com" target="_blank" rel="me" class="text-zinc-400 hover:text-white transition-colors">Scale With Search</a></li>
            <li><a href="https://aifirstsearch.com" target="_blank" rel="me" class="text-zinc-400 hover:text-white transition-colors">AI First Search</a></li>
            <li><a href="https://browserprompt.com" target="_blank" rel="me" class="text-zinc-400 hover:text-white transition-colors">Browser Prompt</a></li>
            <li><a href="https://polytraffic.com" target="_blank" rel="me" class="text-zinc-400 hover:text-white transition-colors">Polytraffic</a></li>
            <li><a href="https://victorvalentineromo.com" target="_blank" rel="me" class="text-zinc-400 hover:text-white transition-colors">Victor Valentine Romo</a></li>
            <li><a href="https://seobyrole.com" target="_blank" rel="me" class="text-zinc-400 hover:text-white transition-colors">SEO By Role</a></li>
          </ul>
        </div>
      </div>

      <!-- Bottom bar -->
      <div class="pt-8 border-t border-zinc-800/60 flex flex-col md:flex-row items-center justify-between gap-4">
        <p class="text-xs text-zinc-700">&copy; 2026 Victor Valentine Romo. All rights reserved.</p>
        <p class="text-xs text-zinc-700">A <a href="https://scalewithsearch.com" target="_blank" class="text-zinc-500 hover:text-amber-500 transition-colors">Scale With Search</a> property.</p>
      </div>
    </div>
  </footer>


  <script>
    // Mega menu
    (function() {
      const triggers = document.querySelectorAll('.mega-trigger');
      const panels = document.querySelectorAll('.mega-panel');
      let closeTimeout = null;

      function openPanel(id) {
        clearTimeout(closeTimeout);
        panels.forEach(p => p.classList.add('hidden'));
        triggers.forEach(t => t.setAttribute('aria-expanded', 'false'));
        const panel = document.getElementById('mega-' + id);
        const trigger = document.querySelector('[data-mega="' + id + '"] .mega-trigger');
        if (panel) panel.classList.remove('hidden');
        if (trigger) trigger.setAttribute('aria-expanded', 'true');
      }

      function scheduleClose() {
        closeTimeout = setTimeout(() => {
          panels.forEach(p => p.classList.add('hidden'));
          triggers.forEach(t => t.setAttribute('aria-expanded', 'false'));
        }, 200);
      }

      function cancelClose() { clearTimeout(closeTimeout); }

      triggers.forEach(btn => {
        const wrapper = btn.closest('[data-mega]');
        const id = wrapper.getAttribute('data-mega');
        btn.addEventListener('mouseenter', () => openPanel(id));
        btn.addEventListener('click', (e) => {
          e.preventDefault();
          const panel = document.getElementById('mega-' + id);
          if (panel && !panel.classList.contains('hidden')) {
            panel.classList.add('hidden');
            btn.setAttribute('aria-expanded', 'false');
          } else {
            openPanel(id);
          }
        });
        wrapper.addEventListener('mouseleave', scheduleClose);
      });

      panels.forEach(panel => {
        panel.addEventListener('mouseenter', cancelClose);
        panel.addEventListener('mouseleave', scheduleClose);
      });

      document.addEventListener('click', (e) => {
        if (!e.target.closest('[data-mega]') && !e.target.closest('.mega-panel')) {
          panels.forEach(p => p.classList.add('hidden'));
          triggers.forEach(t => t.setAttribute('aria-expanded', 'false'));
        }
      });

      document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape') {
          panels.forEach(p => p.classList.add('hidden'));
          triggers.forEach(t => t.setAttribute('aria-expanded', 'false'));
        }
      });
    })();

    // Mobile menu
    const mobileMenuBtn = document.getElementById('mobile-menu-btn');
    const mobileMenu = document.getElementById('mobile-menu');
    const menuIcon = document.getElementById('menu-icon');
    const closeIcon = document.getElementById('close-icon');
    if (mobileMenuBtn) {
      mobileMenuBtn.addEventListener('click', () => {
        mobileMenu.classList.toggle('hidden');
        menuIcon.classList.toggle('hidden');
        closeIcon.classList.toggle('hidden');
      });
    }

    // Mobile accordion sections
    document.querySelectorAll('.mobile-section-toggle').forEach(btn => {
      btn.addEventListener('click', () => {
        const section = btn.nextElementSibling;
        const chevron = btn.querySelector('svg');
        section.classList.toggle('hidden');
        chevron.style.transform = section.classList.contains('hidden') ? '' : 'rotate(180deg)';
      });
    });

    // Self-link neutralizer
    (function() {
      const currentPath = window.location.pathname.replace(/\.html$/, '').replace(/\/$/, '') || '/';
      document.querySelectorAll('a[href]').forEach(a => {
        const href = a.getAttribute('href').replace(/\.html$/, '').replace(/\/$/, '') || '/';
        if (href === currentPath) {
          a.removeAttribute('href');
          a.setAttribute('aria-current', 'page');
          a.style.opacity = '0.5';
          a.style.pointerEvents = 'none';
        }
      });
    })();
  </script>

</body>
</html>